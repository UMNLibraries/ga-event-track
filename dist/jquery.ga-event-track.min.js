var GaEventTrack=function(){var _events=["forms","links","scrolldepth"];var FormSubmit={};var LinkClick={};var ScrollDepth={};return{_events:_events,FormSubmit:FormSubmit,LinkClick:LinkClick,ScrollDepth:ScrollDepth}}(GaEventTrack);(function($,GaEventTrack){"use strict";GaEventTrack.FormSubmit=function(element){var $form=$(element);var location=function(){return{hostname:window.location.hostname,pathname:window.location.pathname}};var inputName=function(input){return input.attr("name")||input.attr("type")};var inputValue=function(input){if(input.attr("type")==="radio"){return $("input[name="+inputName(input)+"]:radio:checked").val()}return input.val()};var formName=function(){var $name=$form.attr("name")||$($form.parents("[id]")[0]).attr("id");return $name};var gatherInputs=function(){var $formData={};$(":input",$form).each(function(){var $input=$(this);$formData[inputName($input)]=inputValue($input)});return $formData};var media=function(){return $("body").data("media")};var date=function(){return $.now()};return{location:location(),name:formName(),inputs:gatherInputs(),media:media(),date:date()}};$.ga_event_track_forms=function(event){if($.inArray(event,GaEventTrack._events)!=-1&&event==="forms"){return $("body.ga-track-forms form").each(function(idx,element){var submitEvent=function(formData){try{if(JSON&&JSON.stringify){var $ga_label=JSON.stringify(formData);ga("send","event","Forms","Submit",$ga_label);return true}}catch(error){return false}};$(element).submit(function(event){event.preventDefault();event.stopPropagation();var $this=$(this);$this.unbind("submit");var $formData=new GaEventTrack.FormSubmit($this);submitEvent($formData);setTimeout(function(){$this.submit()},250)})})}}})(jQuery,GaEventTrack);(function($,GaEventTrack){"use strict";GaEventTrack.LinkClick=function(element,pageX,pageY){var $link=$(element);var location=function(){return{hostname:window.location.hostname,pathname:window.location.pathname}};var media=function(){return $("body").data("media")};var mouse=function(){return{pageX:pageX,pageY:pageY}};var linkHref=function(){return $($link).attr("href")};var linkText=function(){return $.trim($($link).text())};var parents=function(){return $.map($($link).parents(),function(v){return $(v).attr("id")}).reverse().join("|")};var date=function(){return $.now()};return{location:location(),media:media(),mouse:mouse(),href:linkHref(),text:linkText(),parents:parents(),date:date()}};$.ga_event_track_links=function(event){if($.inArray(event,GaEventTrack._events)!=-1&&event==="links"){return $("body.ga-track-links a").not(".dropdown-toggle").not('[class^="chosen"]').not('[data-toggle^="tab"]').each(function(idx,element){var submitEvent=function(linkData){try{if(JSON&&JSON.stringify){var $ga_label=JSON.stringify(linkData);ga("send","event","Links","Click",$ga_label);return true}}catch(error){return false}};$(element).click(function(event){event.preventDefault();event.stopPropagation();var $this=$(this);$this.unbind("click");var $linkData=new GaEventTrack.LinkClick($this,event.pageX,event.pageY);submitEvent($linkData);if($this.hasClass("ga-no-follow")){return false}else{setTimeout(function(){window.location=$this.attr("href")},250)}})})}}})(jQuery,GaEventTrack);(function($,window,document,undefined){"use strict";var defaults={minHeight:0,elements:[],percentage:true,userTiming:true,pixelDepth:false,nonInteraction:true};var $window=$(window),cache=[],lastPixelDepth=0,universalGA;$.ga_event_track_scroll=function(event,options){var startTime=+new Date;options=typeof options==="undefined"?{}:optionalArg;options=$.extend({},defaults,options);if($(document).height()<options.minHeight){return}universalGA=true;if(options.percentage){sendBaseline("Percentage")}else if(options.elements){sendBaseline("Elements")}function sendBaseline(action){ga("send","event","Scroll Depth",action,"Baseline",1,{nonInteraction:true})}function sendEvent(action,label,scrollDistance,timing){ga("send","event","Scroll Depth",action,label,1,{nonInteraction:options.nonInteraction});if(options.pixelDepth&&arguments.length>2&&scrollDistance>lastPixelDepth){lastPixelDepth=scrollDistance;ga("send","event","Scroll Depth","Pixel Depth",rounded(scrollDistance),1,{nonInteraction:options.nonInteraction})}if(options.userTiming&&arguments.length>3){ga("send","timing","Scroll Depth",action,timing,label)}}function calculateMarks(docHeight){return{"10%":parseInt(docHeight*.1,10),"20%":parseInt(docHeight*.2,20),"30%":parseInt(docHeight*.3,30),"40%":parseInt(docHeight*.4,40),"50%":parseInt(docHeight*.5,50),"60%":parseInt(docHeight*.6,60),"70%":parseInt(docHeight*.7,70),"80%":parseInt(docHeight*.8,80),"90%":parseInt(docHeight*.9,90),"100%":docHeight-5}}function checkMarks(marks,scrollDistance,timing){$.each(marks,function(key,val){if($.inArray(key,cache)===-1&&scrollDistance>=val){sendEvent("Percentage",key,scrollDistance,timing);cache.push(key)}})}function checkElements(elements,scrollDistance,timing){$.each(elements,function(index,elem){if($.inArray(elem,cache)===-1&&$(elem).length){if(scrollDistance>=$(elem).offset().top){sendEvent("Elements",elem,scrollDistance,timing);cache.push(elem)}}})}function rounded(scrollDistance){return(Math.floor(scrollDistance/250)*250).toString()}function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}}if($("body.ga-track-scroll").length){$window.on("scroll.scrollDepth",throttle(function(){var docHeight=$(document).height(),winHeight=window.innerHeight?window.innerHeight:$window.height(),scrollDistance=$window.scrollTop()+winHeight,marks=calculateMarks(docHeight),timing=+new Date-startTime;if(cache.length>=4+options.elements.length){$window.off("scroll.scrollDepth");return}if(options.elements){checkElements(options.elements,scrollDistance,timing)}if(options.percentage){checkMarks(marks,scrollDistance,timing)}},500))}}})(jQuery,window,document);
//# sourceMappingURL=dist/jquery.ga-event-track.min.js.map